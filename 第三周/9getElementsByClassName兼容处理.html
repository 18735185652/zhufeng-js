<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>
<div class="w1 w2 w3"></div>
<div class="w2 w3"></div>
<div class="w1 w2"></div>
<div class="w1 w3"></div>
<div class="w3"></div>
<script src="../第二周/utils.js"></script>
<script>

    // console.log(document.getElementsByClassName("w1"));//写一个样式类名，只要包含这个样式类名就可以
    // console.log(document.getElementsByClassName("w1   w3"));//必须同时包含w1&&w3才可以，但是和样式的顺序以及中间有多少个空格是没有关系的
    // console.log(document.getElementsByClassName(" w1  w3  ")); //空集合

    //getElementsByClassName 通过元素的样式类名获取一组元素集合
    //className 要获取的样式类名(可能是一个或多个)
    //context 元素上下文 如果不传，默认document
    // function getElementsByClassName(className,context){
    //    context = context || document;
    //    //把传递进来的样式类名首位空格先去掉，然后在按照中间的空格把它里面的每一项拆分成数组
    //     var classNameAry = className.replace(/(^ +| +$)/g,"").split(/ +/g);
    //     //获取指定上下文中所有的元素标签，循环这些标签，获取每一个标签的样式className样式类名字符串
    //     var nodeList = context.getElementsByTagName("*");
    //     var ary=[];
    //     for(var i=0,len=nodeList.length;i<len;i++){
    //         var curNode = nodeList[i];
    //         //判断curNode.className是否既包含w3又包含w1，如果这两个都有，curNode就是我想要的，否则就不是我想要的
    //         //在循环 ["w3","w1"],
    //         var isOk = true;//我们假设curNode中包含了所有的样式
    //         for(var k=0;k<classNameAry.length;k++){
    //                 var reg = new RegExp("(^| +)" + classNameAry[k] + "( +|$)");
    //                 //第一次"w3"
    //
    //             if(!reg.test( curNode.className)){
    //                 isOk = false;
    //                 break;
    //             }
    //             console.log(ary);
    //             if(isOk){//拿每一个标签分别和所有样式类名比较后，如果结果还是true的话，说明当前元素标签包含
    //                 //了所有的样式，也是我们想要的
    //                 ary.push(curNode);
    //             }
    //
    //         }
    //     }
    //     return ary;
    //
    // }


    function getElementsByClassName(className,context){
        context = context||document;
        var classNameAry = className.replace(/(^ +| +$)/g,"").split(/ +/g);
        var ary = [];
        var nodeList = context.getElementsByTagName("*");
        for(var i=0;i<nodeList.length;i++){
            var curNode = nodeList[i];
            var isOk =true;
            for(var k=0;k<classNameAry.length;k++){
                var reg = new RegExp("(^| +)"+classNameAry[k]+"( +|$)");
                if(!reg.test(curNode.className)){
                    isOk = false;
                    break;
                }
            }
            if(isOk){
                ary.push(curNode.className)
            }
        }
        return ary;
    }

    console.log(getElementsByClassName(" w1  w3  "));
</script>
</body>
</html>